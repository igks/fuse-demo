<div id="products" class="page-layout carded fullwidth inner-scroll">
    <!-- TOP BACKGROUND -->
    <div class="top-bg accent"></div>
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center">
        <!-- HEADER -->
        <div
            class="header accent"
            fxLayout="column"
            fxLayoutAlign="center center"
            fxLayout.gt-xs="row"
            fxLayoutAlign.gt-xs="space-between center"
        >
            <!-- APP TITLE -->
            <div
                class="logo mb-24 mb-md-0"
                fxLayout="row"
                fxLayoutAlign="start center"
            >
                <mat-icon
                    class="logo-icon s-32 mr-16"
                    [@animate]="{
                        value: '*',
                        params: { delay: '300ms', scale: '0.2' }
                    }"
                >
                    format_list_bulleted
                </mat-icon>
                <span
                    class="logo-text h1"
                    [@animate]="{
                        value: '*',
                        params: { delay: '300ms', x: '-25px' }
                    }"
                >
                    Department List
                </span>
            </div>
            <!-- / APP TITLE -->

            <!-- ADD FILTER BUTTON -->
            <div fxLayout="column">
                <button
                    mat-raised-button
                    class="mt-24 mt-md-0"
                    [ngClass]="{ 'orange-bg fuse-white-fg': isFiltered }"
                    [ngClass]="{ 'fuse-white': !isFiltered }"
                    (click)="isFiltered ? clearFilter() : setShowFilterForm()"
                >
                    <mat-icon class="mr-8">filter_list</mat-icon>
                    <span>{{
                        !isFiltered ? "ADD FILTER" : "CLEAR FILTER"
                    }}</span>
                </button>
            </div>

            <!-- / ADD FILTER BUTTON -->

            <!-- ADD BUTTON -->
            <button
                mat-raised-button
                [routerLink]="['/pages/master/department/form']"
                class="add-product-button fuse-white mt-24 mt-md-0"
            >
                <mat-icon class="mr-8">add_box</mat-icon>
                <span>ADD NEW RECORD</span>
            </button>
            <!-- / ADD BUTTON -->

            <!-- Print Button -->
            <button
                mat-raised-button
                [routerLink]="['/pages/report/department']"
                class="add-product-button fuse-white mt-24 mt-md-0"
            >
                <mat-icon class="mr-8">print</mat-icon>
                <span>PRINT</span>
            </button>
            <!-- End Print Button -->
        </div>
        <!-- / HEADER -->

        <div
            *ngIf="showFilterForm"
            class="content-card my-12"
            fusePerfectScrollbar
        >
            <form
                class="mat-card mat-elevation-z4 p-24 mr-24"
                fxLayout="column"
                fxLayoutAlign="start"
                fxFlex="1 0 auto"
                name="form"
                [formGroup]="form"
            >
                <div
                    fxLayout="column"
                    fxLayoutAlign="center center"
                    fxLayout.gt-xs="row"
                    fxLayoutAlign.gt-xs="space-between center"
                    class="h2 mb-24"
                >
                    <h2>Add filter in below field</h2>
                    <div>
                        <button
                            mat-raised-button
                            class="add-product-button mt-24 mt-md-0 mr-8"
                            (click)="cancelFilter()"
                        >
                            <mat-icon class="mr-8">cancel</mat-icon>
                            <span>CANCEL</span>
                        </button>

                        <button
                            mat-raised-button
                            class="add-product-button mt-24 mt-md-0 ml-8 accent-bg fuse-white-fg"
                            (click)="addFilter()"
                        >
                            <mat-icon class="mr-8"
                                >check_circle_outline</mat-icon
                            >
                            <span>SET FILTER</span>
                        </button>
                    </div>
                </div>

                <div
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxFlex="1 0 auto"
                >
                    <mat-form-field appearance="outline" fxFlex="100">
                        <mat-label>Filter by code</mat-label>
                        <input matInput formControlName="code" />
                    </mat-form-field>
                </div>

                <div
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxFlex="1 0 auto"
                >
                    <mat-form-field appearance="outline" fxFlex="100">
                        <mat-label>Filter by name</mat-label>
                        <input matInput formControlName="name" />
                    </mat-form-field>
                </div>
            </form>
        </div>

        <!-- CONTENT CARD -->
        <div class="content-card">
            <mat-table
                class="products-table"
                #table
                [dataSource]="departments"
                matSort
                [@animateStagger]="{ value: '50' }"
                fusePerfectScrollbar
                matSort
                (matSortChange)="sortChange($event)"
            >
                <!-- Code Column -->
                <ng-container matColumnDef="code">
                    <mat-header-cell *matHeaderCellDef mat-sort-header
                        >Code</mat-header-cell
                    >
                    <mat-cell *matCellDef="let departments">
                        <p class="text-truncate">{{ departments.code }}</p>
                    </mat-cell>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header
                        >Name</mat-header-cell
                    >
                    <mat-cell *matCellDef="let departments">
                        <p class="text-truncate">{{ departments.name }}</p>
                    </mat-cell>
                </ng-container>

                <!-- Buttons Column -->
                <ng-container matColumnDef="buttons">
                    <mat-header-cell *matHeaderCellDef>Option</mat-header-cell>
                    <mat-cell *matCellDef="let departments">
                        <div fxFlex="row" fxLayoutAlign="start center">
                            <button
                                mat-icon-button
                                [matMenuTriggerFor]="moreMenu"
                                aria-label="More"
                                (click)="$event.stopPropagation()"
                            >
                                <mat-icon class="secondary-text"
                                    >more_vert</mat-icon
                                >
                            </button>

                            <mat-menu #moreMenu="matMenu">
                                <button
                                    mat-menu-item
                                    aria-label="edit"
                                    [routerLink]="[
                                        '/pages/master/department/form/' +
                                            departments.id
                                    ]"
                                >
                                    <mat-icon>edit</mat-icon>
                                    <span>Edit</span>
                                </button>

                                <button
                                    mat-menu-item
                                    aria-label="remove"
                                    (click)="deleteDepartment(departments.id)"
                                >
                                    <mat-icon>delete</mat-icon>
                                    <span>Remove</span>
                                </button>
                            </mat-menu>
                        </div>
                    </mat-cell>
                </ng-container>

                <mat-header-row
                    *matHeaderRowDef="displayedColumns; sticky: true"
                ></mat-header-row>

                <mat-row
                    *matRowDef="let product; columns: displayedColumns"
                    class="product"
                    matRipple
                >
                </mat-row>
            </mat-table>

            <mat-paginator
                #paginator
                [length]="pagination.totalItems"
                [pageIndex]="pagination.currentPage - 1"
                [pageSize]="pagination.pageSize"
                [pageSizeOptions]="[5, 10, 25, 50]"
                (page)="pageEvents($event)"
                showFirstLastButtons="true"
            >
            </mat-paginator>
        </div>
        <!-- / CONTENT CARD -->
    </div>
    <!-- / CENTER -->
</div>
